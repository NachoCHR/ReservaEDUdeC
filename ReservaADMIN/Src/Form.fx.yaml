Form As screen:

    Label2 As label:
        Height: =54
        Text: =User().FullName
        Width: =326
        X: =224
        Y: =116
        ZIndex: =2

    Button1 As button:
        Fill: =RGBA(0, 134, 208, 1)
        OnSelect: |-
            =If(
                TimeValue(Dropdown1.Selected.Value) >= TimeValue(Dropdown1_1.Selected.Value),
                Notify("La hora de término debe ser mayor que la hora de inicio", NotificationType.Warning),
                Set(VarShowPopUp,true)
            )
        RadiusBottomLeft: =50
        RadiusBottomRight: =50
        RadiusTopLeft: =50
        RadiusTopRight: =50
        Text: ="Reservar"
        X: =962
        Y: =681
        ZIndex: =6

    DiasRepetir As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =25

        ComboBox1 As combobox:
            DisplayFields: =["Value"]
            Height: =50
            IsSearchable: =false
            Items: =Choices([@Reservas].Dias)
            OnChange: =
            SearchFields: =["Value"]
            SearchItems: =[]
            Tooltip: ="Todos los dias"
            Width: =305
            X: =224
            Y: =502
            ZIndex: =5

        Label5_6 As label:
            Fill: =RGBA(0, 134, 208, 1)
            Font: =Font.'Lato Black'
            Height: =41
            Size: =14
            Text: |-
                ="Días a repetir:"
            Width: =305
            X: =224
            Y: =461
            ZIndex: =18

    HoraTermino As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =25

        Dropdown1_1 As dropdown:
            Height: =50
            Items: =HorasDropdown
            OnChange: =
            Width: =147
            X: =975
            Y: =347
            ZIndex: =4

        Label5_5 As label:
            Fill: =RGBA(0, 134, 208, 1)
            Font: =Font.'Lato Black'
            Height: =41
            Size: =14
            Text: |-
                ="Hora Termino:"
            Width: =147
            X: =975
            Y: =306
            ZIndex: =17

    FechaTermino As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =25

        DateValue1_1 As datepicker:
            EndYear: =Year(Today())+100
            Height: =50
            IsEditable: =true
            OnSelect: |-
                =If(
                    Self.SelectedDate < Today(),
                    Notify("La fecha seleccionada no puede ser anterior a hoy", NotificationType.Warning)
                );
                If(
                    Self.SelectedDate < Today(),
                    Reset(Self)
                )
            PaddingBottom: =0
            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
            Size: =13
            StartYear: =1899
            Width: =304
            X: =631
            Y: =343
            ZIndex: =8

        Label5_4 As label:
            Fill: =RGBA(0, 134, 208, 1)
            Font: =Font.'Lato Black'
            Height: =41
            Size: =14
            Text: |-
                ="Fecha de termino:"
            Width: =305
            X: =630
            Y: =302
            ZIndex: =16

    HoraInicio As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =25

        Dropdown1 As dropdown:
            Height: =50
            Items: =HorasDropdown
            Width: =147
            X: =975
            Y: =212
            ZIndex: =3

        Label5_3 As label:
            Fill: =RGBA(0, 134, 208, 1)
            Font: =Font.'Lato Black'
            Height: =41
            Size: =14
            Text: |-
                ="Hora Inicio:"
            Width: =147
            X: =975
            Y: =170
            ZIndex: =15

    FechaInicio As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =25

        DateValue1 As datepicker:
            EndYear: =Year(Today())+100
            Height: =53
            IsEditable: =true
            OnSelect: |-
                =If(
                    Self.SelectedDate < Today(),
                    Notify("La fecha seleccionada no puede ser anterior a hoy", NotificationType.Warning)
                );
                If(
                    Self.SelectedDate < Today(),
                    Reset(Self)
                )
            PaddingBottom: =0
            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
            Size: =13
            StartYear: =1899
            Width: =304
            X: =631
            Y: =211
            ZIndex: =7

        Label5_2 As label:
            Fill: =RGBA(0, 134, 208, 1)
            Font: =Font.'Lato Black'
            Height: =41
            Size: =14
            Text: |-
                ="Fecha de inicio:"
            Width: =305
            X: =630
            Y: =170
            ZIndex: =14

    EspacioDeportivo As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =25

        EDeportivos As combobox:
            DefaultSelectedItems: =Last(Filter(Choices([@Reservas].EspacioDeportivo), Value = EspacioSeleccionado))
            DisplayFields: =["Value"]
            Height: =48
            IsSearchable: =false
            Items: =Choices([@Reservas].EspacioDeportivo)
            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
            SearchFields: =["Value"]
            SearchItems: =[]
            SelectMultiple: =false
            Width: =305
            X: =224
            Y: =347
            ZIndex: =9

        Label5_1 As label:
            Fill: =RGBA(0, 134, 208, 1)
            Font: =Font.'Lato Black'
            Height: =41
            Size: =14
            Text: |-
                ="Espacio Deportivo:"
            Width: =305
            X: =224
            Y: =306
            ZIndex: =13

    QuienReserva As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =25

        LabelUsuario As label:
            BorderThickness: =2
            Height: =55
            Text: =User().Email
            Width: =305
            X: =224
            Y: =210
            ZIndex: =1

        Label5 As label:
            Fill: =RGBA(0, 134, 208, 1)
            Font: =Font.'Lato Black'
            Size: =14
            Text: |-
                ="Reservado por:"
            Width: =305
            X: =224
            Y: =170
            ZIndex: =12

    Header As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =25

        Encabezado_2 As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(0, 134, 208, 1)
            Height: =50
            RadiusBottomLeft: =40
            RadiusBottomRight: =40
            RadiusTopLeft: =40
            RadiusTopRight: =40
            Text: ="Agregar reserva"
            Width: =1356
            X: =7
            Y: =4
            ZIndex: =10

        Icon6 As icon.Add:
            Color: =RGBA(255, 255, 255, 1)
            DisabledColor: =RGBA(255, 255, 255, 1)
            Height: =32
            Icon: =Icon.Add
            Width: =31
            X: =564
            Y: =13
            ZIndex: =11

    Button1_2 As button:
        Fill: =RGBA(0, 134, 208, 1)
        OnSelect: =Navigate(Main)
        RadiusBottomLeft: =50
        RadiusBottomRight: =50
        RadiusTopLeft: =50
        RadiusTopRight: =50
        Text: ="Volver"
        X: =224
        Y: =681
        ZIndex: =40

    ModelPopUP As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =40

        Rectangle5 As rectangle:
            Fill: =RGBA(0, 121, 187, 0.5)
            Height: =768
            Visible: =VarShowPopUp
            Width: =1366
            ZIndex: =19

        Rectangle6 As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =587
            Visible: =VarShowPopUp
            Width: =696
            X: =337
            Y: =105
            ZIndex: =20

        Label6 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 94, 146, 1)
            FontWeight: =FontWeight.Semibold
            Height: =51
            Size: =15
            Text: |-
                ="Detalles de la reserva:"
            Visible: =VarShowPopUp
            Width: =696
            X: =337
            Y: =65
            ZIndex: =21

        ReservadoPor As label:
            FontWeight: =FontWeight.Bold
            Height: =43
            Text: |-
                ="Reservado por: " 
            Visible: =VarShowPopUp
            Width: =149
            X: =380
            Y: =154
            ZIndex: =22

        Correo As label:
            FontWeight: =FontWeight.Bold
            Text: |-
                ="Correo: "
            Visible: =VarShowPopUp
            Width: =91
            X: =380
            Y: =209
            ZIndex: =23

        "'User.FullName' As label":
            Height: =37
            Text: =User().FullName
            Visible: =VarShowPopUp
            Width: =465
            X: =529
            Y: =157
            ZIndex: =24

        "'User.Correo' As label":
            Text: =User().Email
            Visible: =VarShowPopUp
            Width: =504
            X: =471
            Y: =209
            ZIndex: =25

        TFechaInicio As label:
            FontWeight: =FontWeight.Bold
            Text: |-
                ="Fecha De inicio:"
            Visible: =VarShowPopUp
            X: =380
            Y: =326
            ZIndex: =26

        DFechaInicio As label:
            Text: =DateValue1.SelectedDate
            Visible: =VarShowPopUp
            Width: =191
            X: =550
            Y: =327
            ZIndex: =27

        THoraInicio As label:
            FontWeight: =FontWeight.Bold
            Height: =41
            Text: |-
                ="Hora:  "
            Visible: =VarShowPopUp
            Width: =80
            X: =741
            Y: =325
            ZIndex: =28

        DHoraInicio As label:
            Text: =Dropdown1.Selected.Value & " hrs."
            Visible: =VarShowPopUp
            X: =812
            Y: =325
            ZIndex: =29

        TFechaTermino As label:
            FontWeight: =FontWeight.Bold
            Height: =38
            Text: |-
                ="Fecha de termino:"
            Visible: =VarShowPopUp
            Width: =170
            X: =380
            Y: =385
            ZIndex: =30

        DFechaTermino As label:
            Height: =45
            Text: =DateValue1_1.SelectedDate
            Visible: =VarShowPopUp
            Width: =181
            X: =551
            Y: =385
            ZIndex: =31

        THoraTermino As label:
            FontWeight: =FontWeight.Bold
            Text: |-
                ="Hora:  "
            Visible: =VarShowPopUp
            Width: =80
            X: =741
            Y: =390
            ZIndex: =32

        DHoraTermino As label:
            Text: =Dropdown1_1.Selected.Value & " hrs."
            Visible: =VarShowPopUp
            X: =809
            Y: =390
            ZIndex: =33

        TDiasRepetir As label:
            FontWeight: =FontWeight.Bold
            Text: |-
                ="Días a repetir:"
            Visible: =VarShowPopUp
            X: =380
            Y: =450
            ZIndex: =34

        DDiasSeleccionados As label:
            Text: |-
                =If(
                    CountRows(ComboBox1.SelectedItems) > 0,
                    Concat(ComboBox1.SelectedItems, Value,", "),
                    "No hay días seleccionados."
                )
            Visible: =VarShowPopUp
            Width: =430
            X: =530
            Y: =450
            ZIndex: =35

        BCancelar As button:
            Fill: =RGBA(255, 0, 0, 1)
            OnSelect: =Set(VarShowPopUp,false)
            RadiusBottomLeft: =50
            RadiusBottomRight: =50
            RadiusTopLeft: =50
            RadiusTopRight: =50
            Text: ="Cancelar"
            Visible: =VarShowPopUp
            X: =471
            Y: =577
            ZIndex: =36

        BEnvias As button:
            Fill: =RGBA(127, 178, 57, 1)
            OnSelect: |-
                =Patch(
                    Reservas,
                    Defaults(Reservas),
                    {
                        Usuario: {
                            Claims: Concatenate(
                                "i:0#.f|membership|",
                                User().Email// Person email
                            ),
                            Department: "",
                            DisplayName: User().FullName,
                            Email: User().Email,
                            JobTitle: "",
                            Picture: ""
                        },
                        FechaInicio: DateValue(DateValue1.SelectedDate) + TimeValue(Dropdown1.Selected.Value),
                        FechaTermino: DateValue(DateValue1_1.SelectedDate) + TimeValue(Dropdown1_1.Selected.Value),
                        EspacioDeportivo: EDeportivos.Selected,
                        Dias: ComboBox1.SelectedItems
                        
                    }
                )
                
                Set(VarShowPopUp,false)
            RadiusBottomLeft: =50
            RadiusBottomRight: =50
            RadiusTopLeft: =50
            RadiusTopRight: =50
            Text: ="Enviar"
            Visible: =VarShowPopUp
            X: =723
            Y: =577
            ZIndex: =37

        TEspacioDeportivo As label:
            FontWeight: =FontWeight.Bold
            Height: =41
            Text: |-
                ="Espacio Deportivo:"
            Visible: =VarShowPopUp
            Width: =184
            X: =380
            Y: =270
            ZIndex: =38

        Label24 As label:
            Text: =EspacioSeleccionado
            Visible: =VarShowPopUp
            X: =560
            Y: =268
            ZIndex: =39

