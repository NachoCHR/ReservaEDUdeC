Screen1 As screen:
    Fill: =
    OnVisible: |-
        =/*resets calendar view and date selection to today*/
        Set(_dateSelected, Today());
        Set(_firstDayOfMonth, DateAdd(Today(), 1 - Day(Today()), TimeUnit.Days));
        Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), TimeUnit.Days));
        Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, TimeUnit.Months), -1, TimeUnit.Days));
        Set(_calendarVisible,true)

    "Gallery1 As gallery.'BrowseLayout_Vertical_TwoTextVariant_ver5.0'":
        BorderThickness: =1
        DelayItemLoading: =true
        Items: |-
            =SortByColumns(
                Filter(
                    Reservas,
                    Text(FechaInicio, DateTimeFormat.ShortDate) = Text(_dateSelected, DateTimeFormat.ShortDate) &&
                    Text(EspacioDeportivo.Value) = EspacioSeleccionado
                ),
                "Fechainicio"
            )
        Layout: =Layout.Vertical
        LoadingSpinner: =LoadingSpinner.Data
        TemplatePadding: =0
        TemplateSize: =90
        X: =723
        Y: =189
        ZIndex: =1

        Title2 As label:
            FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
            Height: =20
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Text: |
                =Text(ThisItem.FechaInicio, "HH:mm") & " - " & Text(ThisItem.FechaTermino, "HH:mm")
            VerticalAlign: =VerticalAlign.Top
            Width: =143
            X: =16
            Y: =2
            ZIndex: =1

        NextArrow2 As icon.ChevronRight:
            AccessibleLabel: =Self.Tooltip
            Color: =RGBA(166, 166, 166, 1)
            Height: =50
            Icon: =Icon.ChevronRight
            OnSelect: =Select(Parent)
            PaddingBottom: =16
            PaddingLeft: =16
            PaddingRight: =16
            PaddingTop: =16
            Tooltip: ="Ver los detalles del elemento"
            Width: =50
            X: =Parent.TemplateWidth - Self.Width - 12
            Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
            ZIndex: =3

        Rectangle2 As rectangle:
            BorderThickness: =4
            Height: =90
            OnSelect: =Select(Parent)
            Visible: =ThisItem.IsSelected
            Width: =4
            ZIndex: =5

        Title2_2 As label:
            FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
            Height: =39
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Text: =ThisItem.Usuario.DisplayName
            VerticalAlign: =VerticalAlign.Top
            Width: =308
            X: =16
            Y: =25
            ZIndex: =6

        Title2_3 As label:
            FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
            Height: =39
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Text: =ThisItem.Usuario.Email
            VerticalAlign: =VerticalAlign.Top
            Width: =308
            X: =16
            Y: =51
            ZIndex: =7

    WeekdayGallery1_1 As gallery.WeekdayGallery:
        AccessibleLabel: ="Días de la semana"
        BorderThickness: =2
        Fill: =RGBA(0, 134, 208, 1)
        Height: =42
        Items: =Calendar.WeekdaysLong()
        ShowScrollbar: =false
        TemplatePadding: =0
        TemplateSize: =147
        Visible: =_calendarVisible
        Width: =703
        X: =7
        Y: =297
        ZIndex: =4

        Title1_1 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Height: =41
            OnSelect: =Select(Parent)
            Size: =10
            Text: =ThisItem.Value
            Width: =71
            Wrap: =false
            ZIndex: =1

    MonthDayGallery1_1 As gallery.MonthDayGallery:
        AccessibleLabel: ="Días del mes seleccionado"
        BorderColor: =RGBA(39, 67, 125, 1)
        BorderThickness: =2
        Height: =425
        Items: =[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19, 20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]
        Layout: =Layout.Vertical
        ShowScrollbar: =false
        TemplatePadding: =0
        TemplateSize: =60
        Visible: =_calendarVisible
        Width: =703
        WrapCount: =7
        X: =7
        Y: =339
        ZIndex: =5

        Subcircle1_1 As circle:
            Height: =3 * Title2_1.Size
            OnSelect: =Select(Parent)
            Visible: =And(DateAdd(_firstDayInView, ThisItem.Value) = _dateSelected, Title2_1.Visible)
            Width: =Self.Height
            X: =MonthDayGallery1_1.TemplateWidth/2 - Self.Width/2
            Y: =MonthDayGallery1_1.TemplateHeight / 2 - Self.Height / 2
            ZIndex: =2

        Title2_1 As label:
            Align: =Align.Center
            BorderColor: =RGBA(56, 96, 178, 1)
            Color: =If(DateAdd(_firstDayInView, ThisItem.Value) = _dateSelected, RGBA(255, 255, 255, 1), DateAdd(_firstDayInView, ThisItem.Value) = Today(), RGBA(47, 41, 43, 1), LblMonthSelected1_1.Color)
            Fill: |-
                =/*Fill value changes if the gallery item day = today, or if it lies outside of the current month*/             
                If(
                    /*Date selected is today*/
                    DateAdd(_firstDayInView, ThisItem.Value) = Today() && DateAdd(_firstDayInView, ThisItem.Value) = _dateSelected, RGBA(0,0,0,0),
                    /*Today when it is not selected*/
                    DateAdd(_firstDayInView, ThisItem.Value) = Today(), ColorFade(Subcircle1_1.Fill, 0.67), 
                    /*The day is outside the range of the currently selected month*/
                    Abs(Self.Text - ThisItem.Value) > 10,RGBA(200, 200, 200, 0.3), RGBA(0, 0, 0, 0))
            FocusedBorderColor: =Self.Color
            FocusedBorderThickness: =2
            Height: =MonthDayGallery1_1.TemplateHeight
            OnSelect: =Set(_dateSelected, DateAdd(_firstDayInView, ThisItem.Value, TimeUnit.Days))
            Size: =12
            TabIndex: =0
            Text: =Day(DateAdd(_firstDayInView,ThisItem.Value, TimeUnit.Days))
            Visible: |-
                =/*This item is in a row containing no days of the visible month. It is in the row after the row where the last day of the month occurs*/ 
                 !(DateAdd(_firstDayInView,ThisItem.Value, TimeUnit.Days) - Weekday(DateAdd(_firstDayInView,ThisItem.Value, TimeUnit.Days)) + 1 > _lastDayOfMonth)
            Width: =MonthDayGallery1_1.TemplateWidth
            Wrap: =false
            ZIndex: =3

    Encabezado As button:
        DisplayMode: =DisplayMode.View
        Fill: =RGBA(0, 134, 208, 1)
        Height: =50
        RadiusBottomLeft: =40
        RadiusBottomRight: =40
        RadiusTopLeft: =40
        RadiusTopRight: =40
        Text: ="Reservas espacios deportivos APP"
        Width: =1356
        X: =7
        Y: =4
        ZIndex: =6

    Dropdown2 As dropdown:
        Items: =EspaciosDeportivos.EspacioDeportivo
        OnChange: =Set(EspacioSeleccionado,Dropdown2.Selected.EspacioDeportivo)
        OnSelect: =
        X: =161
        Y: =159
        ZIndex: =7

    "'horario trancision' As group":
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =7

        LblMonthSelected1_1 As label:
            Align: =Align.Center
            Height: =50
            Size: =15
            Text: =Text(_firstDayOfMonth, "mmmm yyyy")
            Visible: =_calendarVisible
            Width: =441
            Wrap: =false
            X: =106
            Y: =229
            ZIndex: =1

        iconPrevMonth1_1 As icon.ChevronLeft:
            Height: =50
            Icon: =Icon.BackArrow
            OnSelect: |-
                =/*changes month view to previous month*/
                Set(_firstDayOfMonth, DateAdd(_firstDayOfMonth, -1, TimeUnit.Months));
                Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), TimeUnit.Days));
                Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, TimeUnit.Months), -1, TimeUnit.Days));
                /*collects calendar events for all days in current month view. Updates _minDate to prevent duplicate data collection if user returns to this month view*/
                If(_minDate > _firstDayOfMonth, Set(_minDate, _firstDayOfMonth);)
            PaddingBottom: =7
            PaddingLeft: =7
            PaddingRight: =7
            PaddingTop: =7
            TabIndex: =0
            Tooltip: ="Ver el mes anterior"
            Visible: |-
                =//_calendarVisible;;
                _firstDayOfMonth > Today()
            Width: =57
            X: =136
            Y: =229
            ZIndex: =2

        iconNextMonth1_1 As icon.ChevronRight:
            Height: =50
            Icon: =Icon.NextArrow
            OnSelect: |-
                =/*changes month view to next month*/
                Set(_firstDayOfMonth, DateAdd(_firstDayOfMonth, 1, TimeUnit.Months));
                Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), TimeUnit.Days));
                /*collects calendar events for all days in current month view. Updates _maxDate to prevent duplicate data collection if user returns to this month view*/
                Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, TimeUnit.Months), -1, TimeUnit.Days));
                If(_lastDayOfMonth > _maxDate, Set(_maxDate, _lastDayOfMonth);)
            PaddingBottom: =7
            PaddingLeft: =7
            PaddingRight: =7
            PaddingTop: =7
            TabIndex: =0
            Tooltip: ="Ver el mes siguiente"
            Visible: |
                =_calendarVisible
            Width: =57
            X: =463
            Y: =229
            ZIndex: =3

    Label1 As label:
        Align: =Align.Center
        Font: =Font.'Lato Black'
        FontWeight: =FontWeight.Bold
        Height: =38
        Text: ="Espacio Deportivo"
        Width: =332
        X: =157
        Y: =118
        ZIndex: =8

    Icon1 As icon.Calendar:
        Color: =RGBA(255, 255, 255, 1)
        Height: =34
        Icon: =Icon.AddToCalendar
        Width: =28
        X: =489
        Y: =12
        ZIndex: =9

    Button2 As button:
        OnSelect: |-
            =ResetForm(Form4);
            NewForm(Form4);
            Navigate(Screen2)
        Text: ="Crear Evento"
        X: =1157
        Y: =96
        ZIndex: =10

    Label8 As label:
        Height: =32
        Text: =User().Email
        Width: =240
        X: =791
        Y: =70
        ZIndex: =11

    Image1 As image:
        Height: =65
        Image: =User().Image
        Width: =71
        X: =703
        Y: =70
        ZIndex: =12

